# Frontend Setup

## Intalling Dependencies (for web-app)
* Make sure to have node npm installed
* Run `npm install` in src/frontend directory
* Install envoy and protobuf Python packages (via pip)

## Running the application

Note: this setup (and other elements of the `README`) assumes that your root directory is setup like such:
```
/CoLearn-Dev
    /colink-frontend-dev
        ...
    /colink-sdk-a-js-dev
        ...
    /colink-server-dev
        /proto
            |
            --- colink.proto
            ...
        ...
```

### Setup
* Start the DDS server core (in `/colink-server-dev`): `cargo run -- --address "127.0.0.1" --port 8080 --mq-amqp amqp://guest:guest@localhost:5672 --mq-api http://guest:guest@localhost:15672/api`
    * Runs on 127.0.0.1:8080 (hard-coded address for now)
    * No TLS support (will include later inside envoy proxy)
* Start the envoy proxy (in `/colink-frontend-dev`): `envoy -c envoy.yaml`
    * Runs on 127.0.0.1:9901 (hard-coded address for now)
* Start react client (in `/colink-frontend-dev`): `npm start`
    * Runs on 127.0.0.1:3000 (hard-coded address for now)

### In Application
* Set the admin_token manually in the debug panel before executing any commands (used for user login)
* User Login component allows an individual to create a JWT with their own ECDSA private key or by generating a new private key. Generated credentials are displayed after creation.

## General Layout

### node_modules
Stores node modules used in frontend code

### proto
Typescript/Javascript definitions of protocol buffers in `dds-dev/proto` folder generated by the `proto-gen.sh` script file. 

Instructions to update `~/proto` definitions:
* In the root directory:
    * Make script executable: `chmod +x ./colink-frontend-dev/proto-gen.sh`
    * Execute script: `./colink-frontend-dev/proto-gen.sh`

### src
Contains React components + support files for the frontend application (index, App, Login, AdminToken)

### docker-compose.yaml
TBD, potentially wrap all imports in Docker container to avoid extra installation of packages.

### envoy.yaml
Envoy proxy that allows the client application to communicate with the DDS server. The proxy server listens on port 8000 for requests sent by the user and redirects those requests to the DDS server.

### index.html
Entry point for the application.

### *.json, webpack.config.js
Configuration files that support installation + development.